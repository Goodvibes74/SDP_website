{% extends 'core/base.html' %} 
{% load static %} 
{% block title %} 
  {% if sale %}Edit{% else %}Create{% endif %} Sale 
{% endblock %} 
{% block content %}
<div class="container ">
  {% if sale %}
    <h2>Edit Sale</h2>
  {% else %}
    <h2>Create Sale</h2>
  {% endif %}

  <form method="post">
    {% csrf_token %}
    <div class="mb-3">
      <label for="title" class="form-label">Title</label>
      <input
        type="text"
        class="form-control"
        id="title"
        name="title"
        required
        value="{{ sale.title|default_if_none:'' }}"
      />
    </div>
    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea
        class="form-control"
        id="description"
        name="description"
        required
      >{{ sale.description|default_if_none:'' }}</textarea>
    </div>
    <div class="mb-3">
      <label for="amount" class="form-label">Amount</label>
      <input
        type="number"
        min=0
        class="form-control"
        id="amount"
        name="amount"
        required
        value="{{ sale.amount|default_if_none:'' }}"
      />
    </div>
    <div class="mb-3">
      <label for="customer" class="form-label">Customer</label>
      <input
        type="text"
        class="form-control"
        id="customer"
        name="customer"
        required
        value="{{ sale.customer|default_if_none:'' }}"
      />
    </div>
    <div class="mb-3">
      <label for="status" class="form-label">Status</label>
      <select class="form-select" id="status" name="status" required>
        {% for key, value in sale.STATUS_CHOICES %}
          <option value="{{ key }}" {% if sale.status == key %}selected{% endif %}>{{ value }}</option>
        {% endfor %}
        {% if not sale %}
          <option value="pending" selected>Pending</option>
        {% endif %}
      </select>
    </div>
    <button type="submit" class="btn btn-primary">
      {% if sale %}Update{% else %}Create{% endif %} Sale
    </button>
  </form>
  {% if error %}
    <div class="alert alert-danger mt-2">{{ error }}</div>
  {% endif %} 
  {% if success %}
    <div class="alert alert-success mt-2">{{ success }}</div>
  {% endif %}
</div>
{% endblock %}
